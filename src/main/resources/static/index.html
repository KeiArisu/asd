<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>前台主页</title>
<link href="css/index.css" rel="stylesheet" />
<link rel="stylesheet" href="layui/css/layui.css" media="all">
</head>
<body>
	<div>
		<!-- 头部 -->
		<div class="head">
			<div class="div1">personal blog</div>
			<div class="div2">我不怕千万人阻挡,只怕自己投降</div>
			<div class="div3">
				<ul style="margin-top: 10px;">
					<li style="display: inline; margin-right: 10px;"><a href="index.html">主页</a></li>
					<li style="display: inline; margin-right: 10px;"><a href="backstage/roll.html">友链</a></li>
					<li style="display: inline; margin-right: 10px;"><a href="backstage/about.html">关于</a></li>
					<li style="display: inline; margin-right: 10px;"><a href="#">GITHUB</a></li>
				</ul>
			</div>
		</div>

		<!-- 中间   -->
		<div class="zj" id="center">

			<div class="zj1" id="center1">

				<fieldset class="layui-elem-field layui-field-title"
					style="margin-top: 30px;">
					<legend>生活如此多娇</legend>
				</fieldset>
				<ul class="layui-timeline" id="show">
				
				
				
					<!-- <li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis"></i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">8月18日</h3>
							<p><a href="backstage/apage.html" style="text-decoration:none;color:black;">
								Spring Boot系列教程</a>
							</p>
							<img src="images/kei.jpg" style="width: 400px;" />
						</div></li>
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis"></i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">8月16日</h3>
							<p>
								杜甫的思想核心是儒家的仁政思想，他有<em>“致君尧舜上，再使风俗淳”</em>的宏伟抱负。个人最爱的名篇有：
							</p>
							<ul>
								<li>《登高》</li>
								<li>《茅屋为秋风所破歌》</li>
							</ul>
							<img src="images/qflat.jpg" style="width: 400px;" />
						</div></li>
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis"></i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">8月15日</h3>
							<p>
								中国人民抗日战争胜利日 <br>常常在想，尽管对这个国家有这样那样的抱怨，但我们的确生在了最好的时代 <br>铭记、感恩
								<br>所有为中华民族浴血奋战的英雄将士 <br>永垂不朽
							</p>
							<img src="images/切姬夜架.jpg" style="width: 400px;" />
						</div></li>
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis"></i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">7月15日</h3>
							<p>
								layui 2.0 的一切准备工作似乎都已到位。发布之弦，一触即发。 <br>不枉近百个日日夜夜与之为伴。因小而大，因弱而强。
								<br>无论它能走多远，抑或如何支撑？至少我曾倾注全心，无怨无悔 <i class="layui-icon"></i>
							</p>
							<img src="images/狂三.jpg" style="width: 400px;" />
						</div></li>
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis"></i>
						<div class="layui-timeline-content layui-text">
							<div class="layui-timeline-title">过去</div>
						</div></li> -->
				</ul>

				<div id="demo7" style="width:400px;"></div>
			</div>

			<div class="zj2" id="center2">

				<div class="zj21">
					<button class="btn" style="border-bottom: 1px black solid;">
						<h4>搜索文章</h4>
					</button>
					<hr
						style="background-color: rgb(241, 241, 241); height: 1px; border: 0px; margin-top: 0px;" />
				</div>
				<div class="zj22">
					<form>
						<div class="layui-form-item">
							<div class="layui-input-inline">
								<input type="text" name="blog_title" id="blog_title" lay-verify="required"
									placeholder="请输入" autocomplete="off" class="layui-input"
									style="width: 300px;">
								<button type="button"
									class="layui-btn layui-btn-primary layui-btn-sm btn1" id="search">
									<i class="layui-icon ">🔍</i>
								</button>
							</div>
						</div>
					</form>
				</div>
				<div>
					<div style="width: 300px;" id="search_blog"></div>
				</div>

				<div style="margin-top: 20px;">
					<button class="btn" style="border-bottom: 1px black solid;">
						<h4>热门标签</h4>
					</button>
					<hr
						style="background-color: rgb(241, 241, 241); height: 1px; border: 0px; margin-top: 0px;" />
				</div>

				<div>
					<div style="width: 300px;" id="hotag"></div>
				</div>

				<div style="margin-top: 20px;">
					<button class="btn" style="border-bottom: 1px black solid;">
						<h4>最新发布</h4>
					</button>
					<hr
						style="background-color: rgb(241, 241, 241); height: 1px; border: 0px; margin-top: 0px;" />
				</div>

				<div>
					<div style="width: 300px;" id="newtag">
					</div>
				</div>
				
				<div style="margin-top: 20px;">
					<button class="btn" style="border-bottom: 1px black solid;">
						<h4>点击最多</h4>
					</button>
					<hr style="background-color: rgb(241, 241, 241); height: 1px; border: 0px; margin-top: 0px;" />
				</div>

				<div class="divw" id="clickdiv">
					
				</div>
				
				<div style="margin-top: 20px;">
					<button class="btn" style="border-bottom: 1px black solid;">
						<h4>版权</h4>
					</button>
					<hr style="background-color: rgb(241, 241, 241); height: 1px; border: 0px; margin-top: 0px;" />
				</div>
				
				
				<div>
					<div style="width: 300px;">
						<div class="divq">©14215214124</div>
						<div class="divq">©14125437623532523</div>
					</div>
				</div>
				
			</div>

		</div>
	</div>
	<script src="layui/layui.js" charset="utf-8"></script>
	<script src="js/jquery.min.js" charset="utf-8"></script>
	<script type="text/javascript">
		var obj=[];
		layui.use([ 'jquery','laypage', 'layer' ], function() {
			var laypage = layui.laypage, layer = layui.layer,$=layui.jquery;


			$.ajax({
				url:"/tag/list",
				success:function(res){
					for(var i=0;i<12;i++){
						$("#hotag").append("<div class='layui-btn layui-btn-sm' style='color: black; background-color: white; display: inline-block; border: 1px rgb(241, 241, 241) solid; margin: 5px;'>"+res.data[i].tag_name+"</div>")
					}
				}
			})
			$.ajax({
				url:'/blog/findAllByDate',
				success:function(res){
					for(var i=0;i<4;i++){
						$("#newtag").append("<div style='margin:20px 0px 20px 0px'><a href=backstage/apage.html?blog_id="+res.data[i].blog_id+" style='text-decoration:none;color:black'>"+res.data[i].blog_title+"</a></div>")
					}
				}
			})
			$.ajax({
				url:'/blog/getBlogCountGroup',
				success:function(res){
					for(var i=0;i<4;i++){
						$("#clickdiv").append("<div style='margin:20px 0px 20px 0px'><a href=backstage/apage.html?blog_id="+res.data[i].blog_id+" style='text-decoration:none;color:black'>"+res.data[i].blog_title+"</a></div>")
					}
				}
			})
			$.ajax({
				url:"/blog/countByStatus",
				success:function(res){
				    rows=res;
				    console.log(res)
				  //完整功能
					laypage.render({
						elem : 'demo7',
						limit : 5,
						count: rows,
						jump : function(obj) {
					    	console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
					        console.log(obj.limit); //得到每页显示的条数     
							
					    	$.ajax({
								url:"/blog/lists",
								data:{
					        		page:obj.curr,
					        		limit:obj.limit
					        	},
								success:function(res){
									console.log(res)
									var config_names=["yourName","yourAvatar"]
									
									$.ajax({
										url:"/config/findByConfigNames",
										data:{
											config_names:config_names
										},
										async:false,
										success:function(req){
											console.log(req);
											obj[0]=req.data[0].config_value;
											obj[1]=req.data[1].config_value;
										}
									});
									var str="";
									for(var i=0;i<res.list.length;i++){
											console.log("file:///E:"+res.list[i].blog_cover_image)
											str+="<div><img style=width:40px;height:40px;border-radius:40px; src=.."+obj[0]+"><span style=margin-left:10px;>"+obj[1]+"</span></div>"
											str+="<h3 class=layui-timeline-title style='margin-left:10px;'><a href=backstage/apage.html?blog_id="+res.list[i].blog_id+">"+res.list[i].blog_title+"<p style='text-align:right;'>"+res.list[i].create_time+"</p></a></h3>"
											str+="<li class=layui-timeline-item>"
											str+="<i class=layui-icon layui-timeline-axis></i>"
											str+="<div class=layui-timeline-content layui-text>"
											str+="<img src="+res.list[i].blog_cover_image+" style=width:400px;>"
											str+="</div>"
											str+="</li>"
									}
									$("#show").html(str);
								}
							});
						}
					});
				}
			});
		
			$("#search").on('click',function(){
				var blog_title=$("#blog_title").val();
			
				if(blog_title==""){
					layer.msg("请输入内容");
					return;
				}
				$("#search_blog").html('');
				$.ajax({
					url:"/blog/list",
					data:{
						blog_title:blog_title
					},
					success:function(res){
						console.log(res)
						if(res.data.length==0){
							layer.msg("输入的内容不存在");
							return;
						}
						for(var i=0;i<res.data.length;i++){
							$("#search_blog").append("<div style='margin:20px 0px 20px 0px'><a href=backstage/apage.html?blog_id="+res.data[i].blog_id+" style='text-decoration:none;color:black'>"+res.data[i].blog_title+"</a></div>")
						}
					}
				});
			});
		}); 
		var h=document.getElementById("center1").getAttribute("height"); 
		var hh=document.getElementById("center2").getAttribute("height");
		document.getElementById("center").setAttribute("height",h+hh);
	</script>
</body>
</html>